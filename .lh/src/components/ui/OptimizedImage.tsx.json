{
    "sourceFile": "src/components/ui/OptimizedImage.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1766782373386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1767010239035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,13 +57,13 @@\n \r\n   return (\r\n     <div\r\n       ref={imgRef}\r\n-      className={cn(\r\n-        'relative overflow-hidden bg-muted',\r\n-        aspectClasses[aspectRatio],\r\n-        className\r\n-      )}\r\n+     className={cn(\r\n+  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n+  isLoaded ? 'opacity-100' : 'opacity-0'\r\n+)}\r\n+\r\n     >\r\n       {/* Placeholder */}\r\n       {!isLoaded && (\r\n         <div \r\n"
                },
                {
                    "date": 1767010272887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,10 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n+  'h-full w-full object-cover scale-90\r\n+ transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010280357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,10 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-cover scale-90\r\n- transition-all duration-500',\r\n+  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010285956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n+  'h-full w-full  transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010292172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full  transition-all duration-500',\r\n+  'h-full w-full object-cover  transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010302913,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-cover  transition-all duration-500',\r\n+  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010316109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-95 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010322015,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-115 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767010330310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-115 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767026423851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-100 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767026435216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-100 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-105 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767026447867,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,9 @@\n   return (\r\n     <div\r\n       ref={imgRef}\r\n      className={cn(\r\n-  'h-full w-full object-contain scale-105 transition-all duration-500',\r\n+  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n   isLoaded ? 'opacity-100' : 'opacity-0'\r\n )}\r\n \r\n     >\r\n"
                },
                {
                    "date": 1767026683123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,96 @@\n+import { useState, useRef, useEffect, ImgHTMLAttributes } from 'react';\r\n+import { cn } from '@/lib/utils';\r\n+\r\n+interface OptimizedImageProps extends ImgHTMLAttributes<HTMLImageElement> {\r\n+  src: string;\r\n+  alt: string;\r\n+  priority?: boolean;\r\n+  aspectRatio?: 'square' | '4/3' | '3/4' | '16/9';\r\n+  placeholderColor?: string;\r\n+}\r\n+\r\n+const OptimizedImage = ({\r\n+  src,\r\n+  alt,\r\n+  priority = false,\r\n+  aspectRatio = 'square',\r\n+  className,\r\n+  placeholderColor,\r\n+  ...props\r\n+}: OptimizedImageProps) => {\r\n+  const [isLoaded, setIsLoaded] = useState(false);\r\n+  const [isInView, setIsInView] = useState(priority);\r\n+  const imgRef = useRef<HTMLDivElement>(null);\r\n+\r\n+  const aspectClasses = {\r\n+    square: 'aspect-square',\r\n+    '4/3': 'aspect-[4/3]',\r\n+    '3/4': 'aspect-[3/4]',\r\n+    '16/9': 'aspect-video',\r\n+  };\r\n+\r\n+  useEffect(() => {\r\n+    if (priority) {\r\n+      setIsInView(true);\r\n+      return;\r\n+    }\r\n+\r\n+    const observer = new IntersectionObserver(\r\n+      ([entry]) => {\r\n+        if (entry.isIntersecting) {\r\n+          setIsInView(true);\r\n+          observer.disconnect();\r\n+        }\r\n+      },\r\n+      {\r\n+        rootMargin: '100px',\r\n+        threshold: 0.01,\r\n+      }\r\n+    );\r\n+\r\n+    if (imgRef.current) {\r\n+      observer.observe(imgRef.current);\r\n+    }\r\n+\r\n+    return () => observer.disconnect();\r\n+  }, [priority]);\r\n+\r\n+  return (\r\n+    <div\r\n+      ref={imgRef}\r\n+     className={cn(\r\n+  'h-full w-full object-cover object-center',\r\n+  'transition-transform transition-opacity duration-500',\r\n+  isLoaded ? 'opacity-100 scale-[0.96]' : 'opacity-0 scale-100'\r\n+)}\r\n+\r\n+\r\n+    >\r\n+      {/* Placeholder */}\r\n+      {!isLoaded && (\r\n+        <div \r\n+          className=\"absolute inset-0 bg-gradient-to-br from-muted to-card\"\r\n+          style={placeholderColor ? { backgroundColor: placeholderColor } : undefined}\r\n+        />\r\n+      )}\r\n+      \r\n+      {/* Image */}\r\n+      {isInView && (\r\n+        <img\r\n+          src={src}\r\n+          alt={alt}\r\n+          loading={priority ? 'eager' : 'lazy'}\r\n+          decoding={priority ? 'sync' : 'async'}\r\n+          onLoad={() => setIsLoaded(true)}\r\n+          className={cn(\r\n+            'h-full w-full object-cover transition-opacity duration-300',\r\n+            isLoaded ? 'opacity-100' : 'opacity-0'\r\n+          )}\r\n+          {...props}\r\n+        />\r\n+      )}\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default OptimizedImage;\r\n"
                },
                {
                    "date": 1767026770153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,77 @@\n+import { useState, useRef, useEffect, ImgHTMLAttributes } from 'react';\r\n+import { cn } from '@/lib/utils';\r\n+\r\n+interface OptimizedImageProps extends ImgHTMLAttributes<HTMLImageElement> {\r\n+  src: string;\r\n+  alt: string;\r\n+  priority?: boolean;\r\n+}\r\n+\r\n+const OptimizedImage = ({\r\n+  src,\r\n+  alt,\r\n+  priority = false,\r\n+  className,\r\n+  ...props\r\n+}: OptimizedImageProps) => {\r\n+  const [isLoaded, setIsLoaded] = useState(false);\r\n+  const [isInView, setIsInView] = useState(priority);\r\n+  const wrapperRef = useRef<HTMLDivElement>(null);\r\n+\r\n+  useEffect(() => {\r\n+    if (priority) {\r\n+      setIsInView(true);\r\n+      return;\r\n+    }\r\n+\r\n+    const observer = new IntersectionObserver(\r\n+      ([entry]) => {\r\n+        if (entry.isIntersecting) {\r\n+          setIsInView(true);\r\n+          observer.disconnect();\r\n+        }\r\n+      },\r\n+      {\r\n+        rootMargin: '120px',\r\n+        threshold: 0.01,\r\n+      }\r\n+    );\r\n+\r\n+    if (wrapperRef.current) observer.observe(wrapperRef.current);\r\n+\r\n+    return () => observer.disconnect();\r\n+  }, [priority]);\r\n+\r\n+  return (\r\n+    <div\r\n+      ref={wrapperRef}\r\n+      className={cn(\r\n+        'relative w-full h-full bg-white flex items-center justify-center overflow-hidden',\r\n+        className\r\n+      )}\r\n+    >\r\n+      {/* White placeholder to prevent dark flash */}\r\n+      {!isLoaded && (\r\n+        <div className=\"absolute inset-0 bg-white\" />\r\n+      )}\r\n+\r\n+      {isInView && (\r\n+        <img\r\n+          src={src}\r\n+          alt={alt}\r\n+          loading={priority ? 'eager' : 'lazy'}\r\n+          decoding={priority ? 'sync' : 'async'}\r\n+          onLoad={() => setIsLoaded(true)}\r\n+          className={cn(\r\n+            'max-w-[90%] max-h-[90%] object-contain',\r\n+            'transition-opacity duration-300',\r\n+            isLoaded ? 'opacity-100' : 'opacity-0'\r\n+          )}\r\n+          {...props}\r\n+        />\r\n+      )}\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default OptimizedImage;\r\n"
                },
                {
                    "date": 1767026868898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,14 +43,15 @@\n   }, [priority]);\r\n \r\n   return (\r\n     <div\r\n-      ref={wrapperRef}\r\n-      className={cn(\r\n-        'relative w-full h-full bg-white flex items-center justify-center overflow-hidden',\r\n-        className\r\n-      )}\r\n-    >\r\n+  ref={wrapperRef}\r\n+  className={cn(\r\n+    'relative w-full h-full bg-white flex items-center justify-center',\r\n+    'overflow-hidden'\r\n+  )}\r\n+>\r\n+\r\n       {/* White placeholder to prevent dark flash */}\r\n       {!isLoaded && (\r\n         <div className=\"absolute inset-0 bg-white\" />\r\n       )}\r\n@@ -74,194 +75,4 @@\n   );\r\n };\r\n \r\n export default OptimizedImage;\r\n-import { useState, useRef, useEffect, ImgHTMLAttributes } from 'react';\r\n-import { cn } from '@/lib/utils';\r\n-\r\n-interface OptimizedImageProps extends ImgHTMLAttributes<HTMLImageElement> {\r\n-  src: string;\r\n-  alt: string;\r\n-  priority?: boolean;\r\n-  aspectRatio?: 'square' | '4/3' | '3/4' | '16/9';\r\n-  placeholderColor?: string;\r\n-}\r\n-\r\n-const OptimizedImage = ({\r\n-  src,\r\n-  alt,\r\n-  priority = false,\r\n-  aspectRatio = 'square',\r\n-  className,\r\n-  placeholderColor,\r\n-  ...props\r\n-}: OptimizedImageProps) => {\r\n-  const [isLoaded, setIsLoaded] = useState(false);\r\n-  const [isInView, setIsInView] = useState(priority);\r\n-  const imgRef = useRef<HTMLDivElement>(null);\r\n-\r\n-  const aspectClasses = {\r\n-    square: 'aspect-square',\r\n-    '4/3': 'aspect-[4/3]',\r\n-    '3/4': 'aspect-[3/4]',\r\n-    '16/9': 'aspect-video',\r\n-  };\r\n-\r\n-  useEffect(() => {\r\n-    if (priority) {\r\n-      setIsInView(true);\r\n-      return;\r\n-    }\r\n-\r\n-    const observer = new IntersectionObserver(\r\n-      ([entry]) => {\r\n-        if (entry.isIntersecting) {\r\n-          setIsInView(true);\r\n-          observer.disconnect();\r\n-        }\r\n-      },\r\n-      {\r\n-        rootMargin: '100px',\r\n-        threshold: 0.01,\r\n-      }\r\n-    );\r\n-\r\n-    if (imgRef.current) {\r\n-      observer.observe(imgRef.current);\r\n-    }\r\n-\r\n-    return () => observer.disconnect();\r\n-  }, [priority]);\r\n-\r\n-  return (\r\n-    <div\r\n-      ref={imgRef}\r\n-     className={cn(\r\n-  'h-full w-full object-cover object-center',\r\n-  'transition-transform transition-opacity duration-500',\r\n-  isLoaded ? 'opacity-100 scale-[0.96]' : 'opacity-0 scale-100'\r\n-)}\r\n-\r\n-\r\n-    >\r\n-      {/* Placeholder */}\r\n-      {!isLoaded && (\r\n-        <div \r\n-          className=\"absolute inset-0 bg-gradient-to-br from-muted to-card\"\r\n-          style={placeholderColor ? { backgroundColor: placeholderColor } : undefined}\r\n-        />\r\n-      )}\r\n-      \r\n-      {/* Image */}\r\n-      {isInView && (\r\n-        <img\r\n-          src={src}\r\n-          alt={alt}\r\n-          loading={priority ? 'eager' : 'lazy'}\r\n-          decoding={priority ? 'sync' : 'async'}\r\n-          onLoad={() => setIsLoaded(true)}\r\n-          className={cn(\r\n-            'h-full w-full object-cover transition-opacity duration-300',\r\n-            isLoaded ? 'opacity-100' : 'opacity-0'\r\n-          )}\r\n-          {...props}\r\n-        />\r\n-      )}\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default OptimizedImage;\r\n-import { useState, useRef, useEffect, ImgHTMLAttributes } from 'react';\r\n-import { cn } from '@/lib/utils';\r\n-\r\n-interface OptimizedImageProps extends ImgHTMLAttributes<HTMLImageElement> {\r\n-  src: string;\r\n-  alt: string;\r\n-  priority?: boolean;\r\n-  aspectRatio?: 'square' | '4/3' | '3/4' | '16/9';\r\n-  placeholderColor?: string;\r\n-}\r\n-\r\n-const OptimizedImage = ({\r\n-  src,\r\n-  alt,\r\n-  priority = false,\r\n-  aspectRatio = 'square',\r\n-  className,\r\n-  placeholderColor,\r\n-  ...props\r\n-}: OptimizedImageProps) => {\r\n-  const [isLoaded, setIsLoaded] = useState(false);\r\n-  const [isInView, setIsInView] = useState(priority);\r\n-  const imgRef = useRef<HTMLDivElement>(null);\r\n-\r\n-  const aspectClasses = {\r\n-    square: 'aspect-square',\r\n-    '4/3': 'aspect-[4/3]',\r\n-    '3/4': 'aspect-[3/4]',\r\n-    '16/9': 'aspect-video',\r\n-  };\r\n-\r\n-  useEffect(() => {\r\n-    if (priority) {\r\n-      setIsInView(true);\r\n-      return;\r\n-    }\r\n-\r\n-    const observer = new IntersectionObserver(\r\n-      ([entry]) => {\r\n-        if (entry.isIntersecting) {\r\n-          setIsInView(true);\r\n-          observer.disconnect();\r\n-        }\r\n-      },\r\n-      {\r\n-        rootMargin: '100px',\r\n-        threshold: 0.01,\r\n-      }\r\n-    );\r\n-\r\n-    if (imgRef.current) {\r\n-      observer.observe(imgRef.current);\r\n-    }\r\n-\r\n-    return () => observer.disconnect();\r\n-  }, [priority]);\r\n-\r\n-  return (\r\n-    <div\r\n-      ref={imgRef}\r\n-     className={cn(\r\n-  'h-full w-full object-contain scale-110 transition-all duration-500',\r\n-  isLoaded ? 'opacity-100' : 'opacity-0'\r\n-)}\r\n-\r\n-    >\r\n-      {/* Placeholder */}\r\n-      {!isLoaded && (\r\n-        <div \r\n-          className=\"absolute inset-0 bg-gradient-to-br from-muted to-card\"\r\n-          style={placeholderColor ? { backgroundColor: placeholderColor } : undefined}\r\n-        />\r\n-      )}\r\n-      \r\n-      {/* Image */}\r\n-      {isInView && (\r\n-        <img\r\n-          src={src}\r\n-          alt={alt}\r\n-          loading={priority ? 'eager' : 'lazy'}\r\n-          decoding={priority ? 'sync' : 'async'}\r\n-          onLoad={() => setIsLoaded(true)}\r\n-          className={cn(\r\n-            'h-full w-full object-cover transition-opacity duration-300',\r\n-            isLoaded ? 'opacity-100' : 'opacity-0'\r\n-          )}\r\n-          {...props}\r\n-        />\r\n-      )}\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default OptimizedImage;\r\n"
                }
            ],
            "date": 1766782373386,
            "name": "Commit-0",
            "content": "import { useState, useRef, useEffect, ImgHTMLAttributes } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface OptimizedImageProps extends ImgHTMLAttributes<HTMLImageElement> {\r\n  src: string;\r\n  alt: string;\r\n  priority?: boolean;\r\n  aspectRatio?: 'square' | '4/3' | '3/4' | '16/9';\r\n  placeholderColor?: string;\r\n}\r\n\r\nconst OptimizedImage = ({\r\n  src,\r\n  alt,\r\n  priority = false,\r\n  aspectRatio = 'square',\r\n  className,\r\n  placeholderColor,\r\n  ...props\r\n}: OptimizedImageProps) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isInView, setIsInView] = useState(priority);\r\n  const imgRef = useRef<HTMLDivElement>(null);\r\n\r\n  const aspectClasses = {\r\n    square: 'aspect-square',\r\n    '4/3': 'aspect-[4/3]',\r\n    '3/4': 'aspect-[3/4]',\r\n    '16/9': 'aspect-video',\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (priority) {\r\n      setIsInView(true);\r\n      return;\r\n    }\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          setIsInView(true);\r\n          observer.disconnect();\r\n        }\r\n      },\r\n      {\r\n        rootMargin: '100px',\r\n        threshold: 0.01,\r\n      }\r\n    );\r\n\r\n    if (imgRef.current) {\r\n      observer.observe(imgRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, [priority]);\r\n\r\n  return (\r\n    <div\r\n      ref={imgRef}\r\n      className={cn(\r\n        'relative overflow-hidden bg-muted',\r\n        aspectClasses[aspectRatio],\r\n        className\r\n      )}\r\n    >\r\n      {/* Placeholder */}\r\n      {!isLoaded && (\r\n        <div \r\n          className=\"absolute inset-0 bg-gradient-to-br from-muted to-card\"\r\n          style={placeholderColor ? { backgroundColor: placeholderColor } : undefined}\r\n        />\r\n      )}\r\n      \r\n      {/* Image */}\r\n      {isInView && (\r\n        <img\r\n          src={src}\r\n          alt={alt}\r\n          loading={priority ? 'eager' : 'lazy'}\r\n          decoding={priority ? 'sync' : 'async'}\r\n          onLoad={() => setIsLoaded(true)}\r\n          className={cn(\r\n            'h-full w-full object-cover transition-opacity duration-300',\r\n            isLoaded ? 'opacity-100' : 'opacity-0'\r\n          )}\r\n          {...props}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OptimizedImage;\r\n"
        }
    ]
}