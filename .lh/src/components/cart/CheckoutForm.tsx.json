{
    "sourceFile": "src/components/cart/CheckoutForm.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766781745938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766782336262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,196 @@\n+import { useState } from 'react';\r\n+import { ArrowLeft, Send } from 'lucide-react';\r\n+import { useCart } from '@/contexts/CartContext';\r\n+import { Button } from '@/components/ui/button';\r\n+import { Input } from '@/components/ui/input';\r\n+import { Textarea } from '@/components/ui/textarea';\r\n+import { useToast } from '@/hooks/use-toast';\r\n+\r\n+const WHATSAPP_NUMBER = '96170123456';\r\n+\r\n+interface CheckoutFormProps {\r\n+  onBack: () => void;\r\n+}\r\n+\r\n+const CheckoutForm = ({ onBack }: CheckoutFormProps) => {\r\n+  const { items, totalPrice, clearCart, setIsCartOpen } = useCart();\r\n+  const { toast } = useToast();\r\n+  const [formData, setFormData] = useState({\r\n+    name: '',\r\n+    phone: '',\r\n+    city: '',\r\n+    notes: '',\r\n+  });\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+\r\n+  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n+    setFormData((prev) => ({\r\n+      ...prev,\r\n+      [e.target.name]: e.target.value,\r\n+    }));\r\n+  };\r\n+\r\n+  const handleSubmit = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    \r\n+    if (!formData.name.trim() || !formData.phone.trim() || !formData.city.trim()) {\r\n+      toast({\r\n+        title: 'Missing Information',\r\n+        description: 'Please fill in all required fields.',\r\n+        variant: 'destructive',\r\n+      });\r\n+      return;\r\n+    }\r\n+\r\n+    setIsSubmitting(true);\r\n+\r\n+    // Build WhatsApp message\r\n+    const orderItems = items\r\n+      .map((item) => `â€¢ ${item.name} x${item.quantity} - $${item.price * item.quantity}`)\r\n+      .join('\\n');\r\n+\r\n+    const message = `\r\n+ðŸŒŸ *New Order from Eclat Parfum* ðŸŒŸ\r\n+\r\n+*Customer Details:*\r\n+ðŸ“› Name: ${formData.name}\r\n+ðŸ“± Phone: ${formData.phone}\r\n+ðŸ“ City/Area: ${formData.city}\r\n+${formData.notes ? `ðŸ“ Notes: ${formData.notes}` : ''}\r\n+\r\n+*Order Details:*\r\n+${orderItems}\r\n+\r\n+ðŸ’° *Total: $${totalPrice}*\r\n+\r\n+Thank you for your order!\r\n+    `.trim();\r\n+\r\n+    const encodedMessage = encodeURIComponent(message);\r\n+    const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;\r\n+\r\n+    // Open WhatsApp\r\n+    window.open(whatsappUrl, '_blank');\r\n+\r\n+    // Clear cart and close drawer\r\n+    setTimeout(() => {\r\n+      clearCart();\r\n+      setIsCartOpen(false);\r\n+      setIsSubmitting(false);\r\n+      toast({\r\n+        title: 'Order Sent!',\r\n+        description: 'Your order has been sent via WhatsApp. We will contact you shortly.',\r\n+      });\r\n+    }, 500);\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"space-y-6\">\r\n+      <button\r\n+        onClick={onBack}\r\n+        className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\r\n+      >\r\n+        <ArrowLeft className=\"h-4 w-4\" />\r\n+        Back to Cart\r\n+      </button>\r\n+\r\n+      <div>\r\n+        <h3 className=\"font-serif text-xl font-semibold mb-1\">Checkout</h3>\r\n+        <p className=\"text-muted-foreground text-sm\">\r\n+          Complete your order details to send via WhatsApp\r\n+        </p>\r\n+      </div>\r\n+\r\n+      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n+        <div className=\"space-y-2\">\r\n+          <label htmlFor=\"name\" className=\"text-sm font-medium\">\r\n+            Full Name <span className=\"text-destructive\">*</span>\r\n+          </label>\r\n+          <Input\r\n+            id=\"name\"\r\n+            name=\"name\"\r\n+            value={formData.name}\r\n+            onChange={handleChange}\r\n+            placeholder=\"Your full name\"\r\n+            className=\"bg-muted border-border\"\r\n+            required\r\n+          />\r\n+        </div>\r\n+\r\n+        <div className=\"space-y-2\">\r\n+          <label htmlFor=\"phone\" className=\"text-sm font-medium\">\r\n+            Phone Number <span className=\"text-destructive\">*</span>\r\n+          </label>\r\n+          <Input\r\n+            id=\"phone\"\r\n+            name=\"phone\"\r\n+            type=\"tel\"\r\n+            value={formData.phone}\r\n+            onChange={handleChange}\r\n+            placeholder=\"+961 XX XXX XXX\"\r\n+            className=\"bg-muted border-border\"\r\n+            required\r\n+          />\r\n+        </div>\r\n+\r\n+        <div className=\"space-y-2\">\r\n+          <label htmlFor=\"city\" className=\"text-sm font-medium\">\r\n+            City / Area <span className=\"text-destructive\">*</span>\r\n+          </label>\r\n+          <Input\r\n+            id=\"city\"\r\n+            name=\"city\"\r\n+            value={formData.city}\r\n+            onChange={handleChange}\r\n+            placeholder=\"e.g., Beirut, Tripoli, Jounieh\"\r\n+            className=\"bg-muted border-border\"\r\n+            required\r\n+          />\r\n+        </div>\r\n+\r\n+        <div className=\"space-y-2\">\r\n+          <label htmlFor=\"notes\" className=\"text-sm font-medium\">\r\n+            Notes (Optional)\r\n+          </label>\r\n+          <Textarea\r\n+            id=\"notes\"\r\n+            name=\"notes\"\r\n+            value={formData.notes}\r\n+            onChange={handleChange}\r\n+            placeholder=\"Any special instructions...\"\r\n+            className=\"bg-muted border-border resize-none\"\r\n+            rows={3}\r\n+          />\r\n+        </div>\r\n+\r\n+        {/* Order Summary */}\r\n+        <div className=\"glass-card rounded-lg p-4 space-y-2\">\r\n+          <h4 className=\"font-medium text-sm\">Order Summary</h4>\r\n+          {items.map((item) => (\r\n+            <div key={item.id} className=\"flex justify-between text-sm text-muted-foreground\">\r\n+              <span>{item.name} x{item.quantity}</span>\r\n+              <span>${item.price * item.quantity}</span>\r\n+            </div>\r\n+          ))}\r\n+          <div className=\"border-t border-border pt-2 mt-2 flex justify-between font-semibold\">\r\n+            <span>Total</span>\r\n+            <span className=\"text-gold\">${totalPrice}</span>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <Button\r\n+          type=\"submit\"\r\n+          variant=\"secondary\"\r\n+          size=\"lg\"\r\n+          className=\"w-full\"\r\n+          disabled={isSubmitting}\r\n+        >\r\n+          <Send className=\"h-4 w-4 mr-2\" />\r\n+          {isSubmitting ? 'Sending...' : 'Send Order via WhatsApp'}\r\n+        </Button>\r\n+      </form>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default CheckoutForm;\r\n"
                }
            ],
            "date": 1766781745938,
            "name": "Commit-0",
            "content": "import { useState } from 'react';\r\nimport { ArrowLeft, Send } from 'lucide-react';\r\nimport { useCart } from '@/contexts/CartContext';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nconst WHATSAPP_NUMBER = '96170123456';\r\n\r\ninterface CheckoutFormProps {\r\n  onBack: () => void;\r\n}\r\n\r\nconst CheckoutForm = ({ onBack }: CheckoutFormProps) => {\r\n  const { items, totalPrice, clearCart, setIsCartOpen } = useCart();\r\n  const { toast } = useToast();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    phone: '',\r\n    city: '',\r\n    notes: '',\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name.trim() || !formData.phone.trim() || !formData.city.trim()) {\r\n      toast({\r\n        title: 'Missing Information',\r\n        description: 'Please fill in all required fields.',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    // Build WhatsApp message\r\n    const orderItems = items\r\n      .map((item) => `â€¢ ${item.name} x${item.quantity} - $${item.price * item.quantity}`)\r\n      .join('\\n');\r\n\r\n    const message = `\r\nðŸŒŸ *New Order from Eclat Parfum* ðŸŒŸ\r\n\r\n*Customer Details:*\r\nðŸ“› Name: ${formData.name}\r\nðŸ“± Phone: ${formData.phone}\r\nðŸ“ City/Area: ${formData.city}\r\n${formData.notes ? `ðŸ“ Notes: ${formData.notes}` : ''}\r\n\r\n*Order Details:*\r\n${orderItems}\r\n\r\nðŸ’° *Total: $${totalPrice}*\r\n\r\nThank you for your order!\r\n    `.trim();\r\n\r\n    const encodedMessage = encodeURIComponent(message);\r\n    const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;\r\n\r\n    // Open WhatsApp\r\n    window.open(whatsappUrl, '_blank');\r\n\r\n    // Clear cart and close drawer\r\n    setTimeout(() => {\r\n      clearCart();\r\n      setIsCartOpen(false);\r\n      setIsSubmitting(false);\r\n      toast({\r\n        title: 'Order Sent!',\r\n        description: 'Your order has been sent via WhatsApp. We will contact you shortly.',\r\n      });\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <button\r\n        onClick={onBack}\r\n        className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\r\n      >\r\n        <ArrowLeft className=\"h-4 w-4\" />\r\n        Back to Cart\r\n      </button>\r\n\r\n      <div>\r\n        <h3 className=\"font-serif text-xl font-semibold mb-1\">Checkout</h3>\r\n        <p className=\"text-muted-foreground text-sm\">\r\n          Complete your order details to send via WhatsApp\r\n        </p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"name\" className=\"text-sm font-medium\">\r\n            Full Name <span className=\"text-destructive\">*</span>\r\n          </label>\r\n          <Input\r\n            id=\"name\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            placeholder=\"Your full name\"\r\n            className=\"bg-muted border-border\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"phone\" className=\"text-sm font-medium\">\r\n            Phone Number <span className=\"text-destructive\">*</span>\r\n          </label>\r\n          <Input\r\n            id=\"phone\"\r\n            name=\"phone\"\r\n            type=\"tel\"\r\n            value={formData.phone}\r\n            onChange={handleChange}\r\n            placeholder=\"+961 XX XXX XXX\"\r\n            className=\"bg-muted border-border\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"city\" className=\"text-sm font-medium\">\r\n            City / Area <span className=\"text-destructive\">*</span>\r\n          </label>\r\n          <Input\r\n            id=\"city\"\r\n            name=\"city\"\r\n            value={formData.city}\r\n            onChange={handleChange}\r\n            placeholder=\"e.g., Beirut, Tripoli, Jounieh\"\r\n            className=\"bg-muted border-border\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"notes\" className=\"text-sm font-medium\">\r\n            Notes (Optional)\r\n          </label>\r\n          <Textarea\r\n            id=\"notes\"\r\n            name=\"notes\"\r\n            value={formData.notes}\r\n            onChange={handleChange}\r\n            placeholder=\"Any special instructions...\"\r\n            className=\"bg-muted border-border resize-none\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n\r\n        {/* Order Summary */}\r\n        <div className=\"glass-card rounded-lg p-4 space-y-2\">\r\n          <h4 className=\"font-medium text-sm\">Order Summary</h4>\r\n          {items.map((item) => (\r\n            <div key={item.id} className=\"flex justify-between text-sm text-muted-foreground\">\r\n              <span>{item.name} x{item.quantity}</span>\r\n              <span>${item.price * item.quantity}</span>\r\n            </div>\r\n          ))}\r\n          <div className=\"border-t border-border pt-2 mt-2 flex justify-between font-semibold\">\r\n            <span>Total</span>\r\n            <span className=\"text-gold\">${totalPrice}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"gold\"\r\n          size=\"lg\"\r\n          className=\"w-full\"\r\n          disabled={isSubmitting}\r\n        >\r\n          <Send className=\"h-4 w-4 mr-2\" />\r\n          {isSubmitting ? 'Sending...' : 'Send Order via WhatsApp'}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutForm;\r\n"
        }
    ]
}